var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GameUtil;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.mStageW=egret.MainContext.instance.stage.stageWidth,i.mStageH=egret.MainContext.instance.stage.stageHeight,e&&(i.params=e),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(e,t),e.prototype.onAddToStage=function(t){this.params?this.init(this.params):this.init()},e.prototype.init=function(t){},e}(egret.DisplayObjectContainer);t.BassPanel=e,__reflect(e.prototype,"GameUtil.BassPanel");var i=function(){function t(){}return t.init=function(t){this.MainStage=t},t.runscene=function(t,e,i){if(void 0===e&&(e=SceneEffect.NullAction),void 0===i&&(i=800),null==this.curScene)return this.curScene=t,void this.MainStage.addChild(this.curScene);if(e==SceneEffect.NullAction)return null!=this.curScene&&this.MainStage.removeChild(this.curScene),this.curScene=t,void this.MainStage.addChild(this.curScene);this.nextScene=t,this.MainStage.addChild(this.nextScene),e==SceneEffect.TransAlpha&&(this.nextScene.alpha=0,egret.Tween.get(this.curScene).to({alpha:0},i),egret.Tween.get(this.nextScene).to({alpha:1},i)),e==SceneEffect.CrossLeft&&(this.nextScene.x=-this.MainStage.stageWidth,egret.Tween.get(this.curScene).to({x:this.MainStage.stageWidth},i),egret.Tween.get(this.nextScene).to({x:0},i)),e==SceneEffect.OpenDoor;var n=this;egret.setTimeout(function(){n.MainStage.removeChild(n.curScene),n.curScene=n.nextScene},this,i)},t.curScene=null,t.nextScene=null,t.MainStage=null,t}();t.GameScene=i,__reflect(i.prototype,"GameUtil.GameScene")}(GameUtil||(GameUtil={}));var Othercontainer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.addChild(t),this.show()},e.prototype.show=function(){},e.prototype.close=function(){egret.Tween.removeAllTweens(),this.removeChildren(),this.parent.removeChild(this)},e}(GameUtil.BassPanel);__reflect(Othercontainer.prototype,"Othercontainer");var MyBitmap=function(t){function e(e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null);var a=t.call(this)||this;return a.init(e,i,n,r),a}return __extends(e,t),e.prototype.init=function(t,e,i,n){this.texture=t,this.$setX(e),this.$setY(i),this.setanchorOff(.5,.5),null!=n&&GameUtil.relativepos(this,n,e,i)},e.prototype.setNewTexture=function(t){this.texture=t},e.prototype.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.Bitmap);__reflect(MyBitmap.prototype,"MyBitmap");var GameUtil;!function(t){var e=function(e){function i(t,i,n,r,a,o){void 0===r&&(r=.5),void 0===a&&(a=.5),void 0===o&&(o=null);var s=e.call(this)||this;return s.init(t,i,n,r,a,o),s}return __extends(i,e),i.prototype.init=function(e,i,n,r,a,o){this.textColor=0,this.fontFamily="楷体",this.$setX(e),this.$setY(i),this.$setSize(n),this.anchorX=r,this.anchorY=a,null!=o&&t.relativepos(this,o,e,i)},i.prototype.setText=function(t){this.text=t,this.setanchorOff(this.anchorX,this.anchorY)},i.prototype.setSize=function(t){this.size=t,this.setanchorOff(this.anchorX,this.anchorY)},i.prototype.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},i}(egret.TextField);t.MyTextField=e,__reflect(e.prototype,"GameUtil.MyTextField")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,r,a,o,s){void 0===o&&(o=.5),void 0===s&&(s=.5);var h=t.call(this,e,i,n,o,s)||this;return h.width=r,h.height=n,h.type=egret.TextFieldType.INPUT,h.baseText="",h.sourceText="",h.ispassword=!1,h.addEventListener(egret.FocusEvent.FOCUS_IN,h.onFocusIn,h),h.addEventListener(egret.FocusEvent.FOCUS_OUT,h.onFocusOut,h),h.addEventListener(egret.TextEvent.CHANGE,h.change,h),h}return __extends(e,t),e.prototype.setPassword=function(){},e.prototype.setBaseText=function(t,e){this.baseText=t,this.baseTextAlpha=e,this.setText(this.baseText),this.alpha=this.baseTextAlpha},e.prototype.setBaseTextSize=function(t,e){this.basetextsize=t,this.sourcesize=e,this.text==this.baseText&&(this.setSize(this.basetextsize),this.height=t)},e.prototype.getText=function(){return this.sourceText},e.prototype.onFocusIn=function(t){this.text==this.baseText&&(this.setText(""),this.height=this.sourcesize,this.setSize(this.sourcesize),this.alpha=1)},e.prototype.onFocusOut=function(t){""==this.text&&(this.setText(this.baseText),this.alpha=this.baseTextAlpha,this.height=this.basetextsize,this.setSize(this.basetextsize))},e.prototype.change=function(t){var e=t.currentTarget.text;e=e[e.length-1],e.length<this.sourceText.length,this.sourceText+=e,console.log(this.sourceText),this.text="";for(var i=0;i<this.sourceText.length;i++)this.text+="*"},e}(t.MyTextField);t.InputTextFiled=e,__reflect(e.prototype,"GameUtil.InputTextFiled")}(GameUtil||(GameUtil={}));var GameOverPageShow=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){this.showscene()},e.prototype.showscene=function(){var t=new egret.DisplayObjectContainer;this.addChild(t);var e=this.mStageW/2,i=450,n=new GameUtil.MyTextField(e,100,80,.5,.5);n.textColor=7716842,n.setText("游戏结束"),this.addChild(n),GameUtil.doAction(t,DisType.Alpha,500);var r=this.relife,a=new GameUtil.Menu(this,"","",r);a.setScaleMode(),a.addButtonShap(GameUtil.createRect(0,0,300,60,1,3381758,40,50),-150,-30),a.addButtonText("再来一局",30),this.addChild(a),a.x=e,a.y=i,GameUtil.doAction(a,DisType.RightTLeft,1500,a.x)},e.prototype.turnback=function(){GameData._i().GameOver=!1,GameData._i().GameScore=0,GameData._i().GameLevel=1,GameScore._i().updatascore(),GameScore._i().updatalevel(),this.close(),GameUtil.GameScene.runscene(new StartGameScene)},e.prototype.relife=function(){GameData._i().GameOver=!1,GameData._i().GameScore=0,GameData._i().GameLevel=1,GameScore._i().updatascore(),GameScore._i().updatalevel(),this.parent.reset(),this.close()},e}(Othercontainer);__reflect(GameOverPageShow.prototype,"GameOverPageShow");var RankName;!function(t){t[t.Totlerank=0]="Totlerank",t[t.Levlerank=1]="Levlerank",t[t.Heightrank=2]="Heightrank",t[t.End=3]="End"}(RankName||(RankName={}));var Ranksprite=function(){function t(){this.init()}return t.prototype.init=function(){},t}();__reflect(Ranksprite.prototype,"Ranksprite");var GameRankPageShow=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){this.ranklish=[],this.curselect=RankName.Totlerank;for(var t=0;20>t;t++){var e=RandomUtils.limitInteger(6,18),i=20+(e-2)*(5*(e-3)+25),n=RandomUtils.limitInteger(6,14),r=10*RandomUtils.limitInteger(10,170);this.ranklish[t]=new Ranksprite,this.ranklish[t].rankarr=r,this.ranklish[t].ranklevel=n,this.ranklish[t].rankheight=i,this.ranklish[t].sxdid=t+1}var a={code:1};this.getRank(a)},e.prototype.getRank=function(t){if(1==t.code){var e=new MyBitmap(RES.getRes("rankbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(e);var i=new MyBitmap(RES.getRes("ranktext_png"),360,66,e);this.addChild(i);for(var n=["总分排行","关卡排行","最大连击排行"],r=0;r<n.length;r++){var a=new GameUtil.Menu(this,"rankname_png","rankname_png",this.showrankcon,[e,r]);this.addChild(a),GameUtil.relativepos(a,e,122,153+127*r)}this.rankselect=new MyBitmap(RES.getRes("rankselect_png"),122,153+127*this.curselect,e),this.addChild(this.rankselect);for(var r=0;3>r;r++){var o=new GameUtil.MyTextField(0,0,25);o.setText(n[r]),o.textColor=16777215,o.bold=!0,this.addChild(o),GameUtil.relativepos(o,e,122,153+127*r)}this.rankcon=new egret.DisplayObjectContainer,this.addChild(this.rankcon),this.showrankcon(e,RankName.Totlerank);var s=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(s),GameUtil.relativepos(s,e,664,25)}else GameUtil.trace(t.msg)},e.prototype.showrankcon=function(t,e){this.curselect=e,GameUtil.relativepos(this.rankselect,t,122,153+127*this.curselect),this.rankcon.removeChildren();var i="";switch(this.curselect){case RankName.Totlerank:this.ranklish.sort(function(t,e){return e.rankarr-t.rankarr});break;case RankName.Levlerank:this.ranklish.sort(function(t,e){return e.ranklevel-t.ranklevel});break;case RankName.Heightrank:this.ranklish.sort(function(t,e){return e.rankheight-t.rankheight})}var n=new GameUtil.ScrollView(390,310);this.rankcon.addChild(n),GameUtil.relativepos(n,t,240,130);for(var r=0;20>r;r++){var a=new MyBitmap(RES.getRes("rankline_png"),190,15+50*r);n.putItem(a);var o=new GameUtil.MyTextField(20,15+50*r,30);o.setText(r+1+""),o.textColor=16777215,n.putItem(o);var s=new GameUtil.MyTextField(170,15+50*r,30,.5);switch(s.setText("sxd-"+this.ranklish[r].sxdid),s.textColor=16777215,n.putItem(s),this.curselect){case RankName.Totlerank:i=""+this.ranklish[r].rankarr;break;case RankName.Levlerank:i=this.ranklish[r].ranklevel+"关";break;case RankName.Heightrank:i=""+this.ranklish[r].rankheight}var h=new GameUtil.MyTextField(370,15+50*r,30,1);h.setText(i),h.textColor=16777215,n.putItem(h)}},e}(Othercontainer);__reflect(GameRankPageShow.prototype,"GameRankPageShow");var GameScene=function(t){function e(){var e=t.call(this)||this;return e.player=[],e.downtime=3,e.btouch=!1,e}return __extends(e,t),e.prototype.init=function(){BGMPlayer._i().play(SoundName.gamebgm),this.intervalarr=[],this.cardarr=[],this.initdata(),this.addtouch(),this.showbg(),this.bindkeyboard(),this.gameinterval(),this.startdown()},e.prototype.initdata=function(){GameData._i().GameOver=!1,GameData._i().GameScore=0,GameData._i().GameLevel=1;for(var t=0;54>t;t++)this.cardarr[t]=t+1;this.currPlayerID=0,this.bsendcard=!1},e.prototype.showbg=function(){var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,9544592);this.addChild(t),this.showplayer(),this.showCardstack(),this.showsendcardbtn(),this.addbetframe()},e.prototype.showplayer=function(){for(var t=250,e=[{x:this.mStageW/2-t,y:this.mStageH-80},{x:this.mStageW-80,y:this.mStageH/2+t},{x:this.mStageW/2+t,y:80},{x:80,y:this.mStageH/2-t}],i=0;4>i;i++)this.player[i]=new Player,this.player[i].x=e[i].x,this.player[i].y=e[i].y,this.player[i].rotation=-90*i,0!=i&&(this.player[i].isAI=!0),this.addChild(this.player[i]);this.bankerID=RandomUtils.limitInteger(0,3),this.player[this.bankerID].setBanker(!0),this.currPlayerID=(this.bankerID+1)%4},e.prototype.showCardstack=function(){for(var t=0;10>t;t++){var e=new CardSprite(1,CardType.Black);e.x=this.mStageW/2+t,e.y=this.mStageH/2,this.addChild(e)}},e.prototype.addbetframe=function(){var t=this;this.betframecont=new egret.Sprite,this.addChild(this.betframecont),this.betframecont.visible=!1;var e=10,i=this.player[0].gold-e,n=10,r=GameUtil.createRect(this.mStageW/2-300,this.mStageH/2-200,600,400,1,4338261);this.betframecont.addChild(r);var a=this.mStageW/2,o=r.y+30,s=new GameUtil.MyTextField(a,o,40,.5,.5);s.setText("下注"),s.textColor=11266777,this.betframecont.addChild(s);for(var h=[{x:0,y:60},{x:0,y:180},{x:200,y:60},{x:400,y:60},{x:400,y:60},{x:500,y:60},{x:500,y:180},{x:400,y:140},{x:400,y:220},{x:0,y:300}],l=[{x:600,y:60},{x:400,y:180},{x:200,y:300},{x:400,y:300},{x:400,y:300},{x:500,y:300},{x:600,y:180},{x:500,y:140},{x:500,y:220},{x:600,y:300}],c=0;c<h.length;c++){var u=GameUtil.createLine(2,15855781,r.x+h[c].x,r.y+h[c].y,r.x+l[c].x,r.y+l[c].y);this.betframecont.addChild(u)}for(var d=[{x:451,y:101},{x:451,y:181},{x:451,y:261},{x:551,y:120},{x:551,y:240}],p=function(a){if(3>a){m.y=r.y+d[a].y-37;var o=[10,50,100];n=o[a]}else 3==a?(e=Math.min(e+=n,t.player[0].gold),i=t.player[0].gold-e,t.betframecont.getChildByName("text3").setText(""+e),t.betframecont.getChildByName("text2").setText(""+i)):(e=Math.max(e-=n,10),i=t.player[0].gold-e,t.betframecont.getChildByName("text3").setText(""+e),t.betframecont.getChildByName("text2").setText(""+i))},c=0;5>c;c++){var g=new GameUtil.Menu(this,"","",p,[c]);g.addButtonShap(GameUtil.createRect(0,0,94,74,1,3381758),-47,-37),this.betframecont.addChild(g),g.x=r.x+d[c].x,g.y=r.y+d[c].y}var m=GameUtil.createRect(0,0,94,74,1,12752946);m.x=r.x+d[0].x-47,m.y=r.y+d[0].y-37,this.betframecont.addChild(m);var g=new GameUtil.Menu(this,"","",function(){t.player[0].gold=i,t.player[0].betgold=e,t.player[0].updatagold(),t.betframecont.visible=!1,t.showWaiting(400)});g.addButtonShap(GameUtil.createRect(0,0,200,40,1,3381758,20,30),-100,-20),g.addButtonText("确   定",30),g.setScaleMode(),this.betframecont.addChild(g),g.x=r.x+300,g.y=r.y+350;var f=[{x:100,y:120},{x:300,y:120},{x:100,y:240},{x:300,y:240},{x:451,y:101},{x:451,y:181},{x:451,y:261},{x:551,y:120},{x:551,y:240}],y=["总金币","下注金币","","","10","50","100","+","-"];y[2]+=i,y[3]+=e;for(var c=0;c<f.length;c++){var s=new GameUtil.MyTextField(r.x+f[c].x,r.y+f[c].y,30,.5,.5);s.setText(y[c]),s.name="text"+c,s.textColor=11266777,this.betframecont.addChild(s)}},e.prototype.showbetframe=function(){return 0==this.bankerID?(this.betframecont.visible=!1,void this.showWaiting(1e3)):(this.betframecont.getChildByName("text3").setText("10"),this.betframecont.getChildByName("text2").setText(""+(this.player[0].gold-10)),this.betframecont.visible=!0,void 0)},e.prototype.showWaiting=function(t){var e=this;this.addChild(GameUtil.WaitServerPanel.getInstace()),GameUtil.WaitServerPanel.getInstace().wainttext.size=30,GameUtil.WaitServerPanel.getInstace().wainttext.setText("请等待其他玩家下注"),egret.setTimeout(function(){e.removeChild(GameUtil.WaitServerPanel.getInstace()),e.AIbet(),e.sendcard(!0)},this,t)},e.prototype.AIbet=function(){for(var t=0;4>t;t++)this.player[t].isAI&&!this.player[t].getBanker()&&(this.player[t].betgold=10*RandomUtils.limitInteger(1,10),this.player[t].gold-=this.player[t].betgold,this.player[t].updatagold())},e.prototype.startdown=function(){var t=""+this.downtime;if(0==this.downtime)t="READY GO";else if(this.downtime<0)return this.removeChild(GameUtil.WaitServerPanel.getInstace()),void this.showbetframe();this.addChild(GameUtil.WaitServerPanel.getInstace()),GameUtil.WaitServerPanel.getInstace().wainttext.size=100,GameUtil.WaitServerPanel.getInstace().wainttext.setText(""+t),this.downtime--,egret.setTimeout(this.startdown,this,1e3)},e.prototype.showsendcardbtn=function(){var t=this.sendcard;this.sendcardbtn=new GameUtil.Menu(this,"","",t,[!0]),this.sendcardbtn.setScaleMode(),this.sendcardbtn.addButtonShap(GameUtil.createRect(0,0,200,40,1,3381758,20,30),-100,-20),this.sendcardbtn.addButtonText("发   牌",30),this.addChild(this.sendcardbtn),this.sendcardbtn.x=this.mStageW/2,this.sendcardbtn.y=this.mStageH/2+150,this.sendcardbtn.visible=!1},e.prototype.sendcard=function(t){var e=this;if(this.sendcardbtn.visible=!1,t&&2==this.player[this.bankerID].handcardarr.length)return this.currPlayerID=(this.bankerID+1)%4,void this.playercall();if(!this.bsendcard){this.bsendcard=!0;var i=this.currPlayerID,n=this.getrandcard(),r=new CardSprite(n.cardnumber,n.cardtype);r.x=this.mStageW/2,r.y=this.mStageH/2,this.addChild(r),this.player[i].handcardarr.push(r),this.player[i].updatahandcardnumber();var a=this.player[i].x,o=this.player[i].y,s=110;0==this.player[i].rotation?a=this.player[i].x+40+s*this.player[i].handcardarr.length:-90==this.player[i].rotation?o=this.player[i].y-40-s*this.player[i].handcardarr.length:-180==this.player[i].rotation?a=this.player[i].x-40-s*this.player[i].handcardarr.length:o=this.player[i].y+40+s*this.player[i].handcardarr.length,egret.Tween.get(r).to({x:a,y:o,rotation:this.player[i].rotation},500).call(function(){r.showfront(),e.bsendcard=!1,e.player[i].handcardarr.length>=5?e.nextplayercall():t||e.playercall(),t&&(e.currPlayerID=(e.currPlayerID+1)%4,e.sendcard(!0))},this)}},e.prototype.getrandcard=function(){var t=this.cardarr[RandomUtils.limitInteger(0,this.cardarr.length-3)],e=Math.floor((t-1)/13),i=(t-1)%13+1,n={cardtype:e,cardnumber:i},r=this.cardarr.indexOf(t);return this.cardarr.splice(r,1),n},e.prototype.playercall=function(){var t=this;0==this.currPlayerID?this.player[this.currPlayerID].showcallbtn(!0):this.player[this.currPlayerID].getHandcardnumber()>=17||0==this.player[this.currPlayerID].getHandcardnumber()?egret.setTimeout(this.nextplayercall,this,500):egret.setTimeout(function(){t.sendcard(!1)},this,500)},e.prototype.nextplayercall=function(){var t=this;this.player[this.currPlayerID].showcallbtn(!1),this.currPlayerID==this.bankerID?egret.setTimeout(this.caculateGame,this,1e3):(this.currPlayerID=(this.currPlayerID+1)%4,0==this.currPlayerID?this.player[this.currPlayerID].showcallbtn(!0):this.player[this.currPlayerID].getHandcardnumber()>=17||0==this.player[this.currPlayerID].getHandcardnumber()?egret.setTimeout(this.nextplayercall,this,500):egret.setTimeout(function(){t.sendcard(!1)},this,500))},e.prototype.caculateGame=function(){for(var t=this.player[this.bankerID].getHandcardnumber(),e=this.player[this.bankerID],i=0;4>i;i++){var n=this.player[i];if(!n.getBanker()){var r=n.getHandcardnumber();if(r>t){var a=n.betgold;e.gold-=a,e.updatagold(),n.gold+=2*a,n.betgold=0,n.updatagold()}else if(r==t)n.gold+=n.betgold,n.betgold=0,n.updatagold();else{var a=n.betgold;e.gold+=a,e.updatagold(),n.betgold=0,n.updatagold()}}}this.gameover()},e.prototype.gameinterval=function(){GameUtil.trace("interval")},e.prototype.bindkeyboard=function(){GameConfig.IsBindKeyboard&&(KeyBoard._i().bindfun(this,this.keyup,KEYCODE.UP),KeyBoard._i().bindfun(this,this.keydown,KEYCODE.DOWN),KeyBoard._i().bindfun(this,this.keyleft,KEYCODE.LEFT),KeyBoard._i().bindfun(this,this.keyright,KEYCODE.RIGHT),KeyBoard._i().bindfun(this,this.keyspace,KEYCODE.SPACE))},e.prototype.checkgameover=function(){var t=!1;t&&this.gameover()},e.prototype.addtouch=function(){var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,0);this.addChild(t),t.$setTouchEnabled(!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){GameData._i().GameOver},this)},e.prototype.touchbegin=function(t){GameData._i().GameOver||(this.btouch=!0)},e.prototype.touchmove=function(t){this.btouch},e.prototype.touchend=function(t){this.btouch&&(this.btouch=!1)},e.prototype.touchout=function(t){this.btouch&&(this.btouch=!1)},e.prototype.gameover=function(){var t=this;console.log("GameOver");for(var e=0;4>e;e++){for(var i=function(i){var r=n.player[e].handcardarr[i];egret.Tween.get(r).to({x:n.mStageW/2,y:n.mStageH/2},300).call(function(){t.removeChild(r)},n)},n=this,r=0;r<this.player[e].handcardarr.length;r++)i(r);this.player[e].handcardarr=[],this.player[e].setBanker(!1)}this.clearinter(),GameData._i().GameOver=!0,this.addChild(new GameOverPageShow)},e.prototype.nextlevelgame=function(){},e.prototype.reset=function(){this.gameinterval(),this.restart()},e.prototype.clearinter=function(){GameUtil.clearinterval(this.intervalarr)},e.prototype.exitgame=function(){GameUtil.GameScene.runscene(new StartGameScene)},e.prototype.restart=function(){this.bankerID=RandomUtils.limitInteger(0,3),this.player[this.bankerID].setBanker(!0),this.currPlayerID=(this.bankerID+1)%4,this.downtime=3,this.startdown()},e.prototype.keydown=function(){},e.prototype.keyleft=function(){},e.prototype.keyright=function(){},e.prototype.keyup=function(){},e.prototype.keyspace=function(){},e}(GameUtil.BassPanel);__reflect(GameScene.prototype,"GameScene");var GameScore=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.gamescoreT=new GameUtil.MyTextField(10,60,40,0,0),this.gamescoreT.setText("当前分数:"+GameData._i().GameScore),this.gamescoreT.textColor=1141216,this.addChild(this.gamescoreT),this.heightscoreT=new GameUtil.MyTextField(10,20,40,0,0),this.heightscoreT.setText("最高分数:"+GameData._i().HeightScore),this.heightscoreT.textColor=1141216,this.addChild(this.heightscoreT),this.gamelevelT=new GameUtil.MyTextField(GameConfig.getSW()/2,20,40,0,0),this.gamelevelT.setText("关卡:"+GameData._i().GameLevel),this.gamelevelT.textColor=1141216,this.addChild(this.gamelevelT)},e.prototype.updatascore=function(){this.gamescoreT.setText("当前分数:"+GameData._i().GameScore),GameData._i().GameScore>GameData._i().HeightScore&&(GameData._i().HeightScore=GameData._i().GameScore,this.updatahscore())},e.prototype.updatahscore=function(){this.heightscoreT.setText("最高分数:"+GameData._i().HeightScore)},e.prototype.updatalevel=function(){this.gamelevelT.setText("关卡:"+GameData._i().GameLevel)},e._i=function(){return this._inst=null==this._inst?new e:this._inst},e._inst=null,e}(egret.DisplayObjectContainer);__reflect(GameScore.prototype,"GameScore");var GameSetting=function(t){function e(){var e=t.call(this)||this;return e.soundswitch=[],e}return __extends(e,t),e.prototype.show=function(){this.soundswitch[1]=GameConfig._i().bgamesound,this.soundswitch[0]=GameConfig._i().bgamemusic,this.switchbtn=[];var t=new MyBitmap(RES.getRes("settingbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(t);for(var e=0;2>e;e++){var i=new MyBitmap(RES.getRes("settingswitch_png"));this.addChild(i);var n=342,r=448,a=this.soundswitch[e]?n:r;GameUtil.relativepos(i,t,a,75+114*e);var o=this.soundswitch[e]?"settingswitchon_png":"settingswitchoff_png";this.switchbtn[e]=new GameUtil.Menu(this,o,o,this.settingswitch,[e,i,n-r]),this.addChild(this.switchbtn[e]),this.swapChildren(i,this.switchbtn[e]),GameUtil.relativepos(this.switchbtn[e],t,394,75+114*e)}var s=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(s),GameUtil.relativepos(s,t,530,17)},e.prototype.settingswitch=function(t,e,i){this.soundswitch[t]=!this.soundswitch[t],e.x+=this.soundswitch[t]?i:-i;var n=this.soundswitch[t]?"settingswitchon_png":"settingswitchoff_png";this.switchbtn[t].setButtonTexture(n,n),GameConfig._i().bgamesound=this.soundswitch[1],GameConfig._i().bgamemusic=this.soundswitch[0];var r=GameConfig._i().bgamemusic?"1":"0",a=GameConfig._i().bgamesound?"1":"0";GameUtil.saveLocalData(GameConfig.GAMEMUSIC,r),GameUtil.saveLocalData(GameConfig.GAMESOUND,a);var o=GameConfig._i().bgamemusic?1:0;BGMPlayer._i().setVolme(o)},e}(Othercontainer);__reflect(GameSetting.prototype,"GameSetting");var KEYCODE;!function(t){t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.SPACE=32]="SPACE"}(KEYCODE||(KEYCODE={}));var KeyBoard=function(){function t(){this.init()}return t.prototype.init=function(){var t=this;this.keyinfo=[],window.addEventListener("keydown",function(e){t.run(e.keyCode)},!1)},t.prototype.bindfun=function(t,e,i){var n={target:t,fun:e,keycode:i};this.keyinfo.push(n)},t.prototype.run=function(t){for(var e=0;e<this.keyinfo.length;e++)if(this.keyinfo[e].keycode==t){var i=this.keyinfo[e].fun;i.apply(this.keyinfo[e].target);break}},t._i=function(){return null==this._instance&&(this._instance=new t),this._instance},t._instance=null,t}();__reflect(KeyBoard.prototype,"KeyBoard");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){document.title=GameConfig.GAMENAME,this.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW,this.stage.setContentSize(GameConfig.DesignWidth,GameConfig.DesignHeight),GameUtil.GameScene.init(this.stage),GameUtil.GameScene.runscene(new GameUtil.LoadingPanel(this.createGameScene,this,0,0))},e.prototype.createGameScene=function(){GameUtil.Http.getinstance(),GameUtil.GameScene.runscene(new StartGameScene)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var BGMPlayer=function(){function t(){this.init()}return t.prototype.init=function(){this.curbgmtag=-1,this.volume=GameConfig._i().bgamemusic?1:0},t.prototype.setVolme=function(t){this.volume=t,-1!=this.curbgmtag&&GameData._i().gamesound[this.curbgmtag].setvolume(this.volume)},t.prototype.play=function(t){-1!=this.curbgmtag&&GameData._i().gamesound[this.curbgmtag]&&GameData._i().gamesound[this.curbgmtag].stop(),this.curbgmtag=t,GameData._i().gamesound[this.curbgmtag]&&(GameData._i().gamesound[this.curbgmtag].play(0,-1),GameData._i().gamesound[this.curbgmtag].setvolume(this.volume))},t._i=function(){return null==this._instance&&(this._instance=new t),this._instance},t._instance=null,t}();__reflect(BGMPlayer.prototype,"BGMPlayer");var Player=function(t){function e(){var e=t.call(this)||this;return e.bankcont=null,e.callbtncont=null,e.initdata(),e.showhead(),e.showgold(),e.addcallbtn(),e}return __extends(e,t),e.prototype.initdata=function(){this.handcardarr=[],this.isBanker=!1,this.isAI=!1,this.gold=1e4,this.betgold=0,this.handcardnumber=0},e.prototype.showhead=function(){this.headimg=new MyBitmap(RES.getRes("head1_png"),0,0),this.addChild(this.headimg)},e.prototype.setBanker=function(t){this.isBanker=t,t?this.showbanker():null!=this.bankcont&&(this.removeChild(this.bankcont),this.bankcont=null)},e.prototype.getBanker=function(){return this.isBanker},e.prototype.showbanker=function(){this.bankcont=new egret.Sprite,this.bankcont.graphics.beginFill(3714764,1),this.bankcont.graphics.drawCircle(0,0,30),this.bankcont.graphics.endFill(),this.addChild(this.bankcont);var t=new GameUtil.MyTextField(0,0,25,.5,.5);t.setText("庄"),this.bankcont.addChild(t),this.bankcont.x=54,this.bankcont.y=-45},e.prototype.showgold=function(){this.totalgoldt=new GameUtil.MyTextField(-140,-20,20,0,0),this.totalgoldt.setText("总:"+this.gold),this.addChild(this.totalgoldt),this.betgoldt=new GameUtil.MyTextField(-140,20,20,0,0),this.betgoldt.setText("押:"+this.betgold),this.addChild(this.betgoldt)},e.prototype.updatagold=function(){this.totalgoldt.setText("总:"+this.gold),this.betgoldt.setText("押:"+this.betgold)},e.prototype.addcallbtn=function(){this.callbtncont=new egret.Sprite,this.addChild(this.callbtncont),this.callbtncont.visible=!1;var t=this.wantcard,e=new GameUtil.Menu(this,"","",t);e.setScaleMode(),e.addButtonShap(GameUtil.createRect(0,0,200,40,1,3381758,20,30),-100,-20),e.addButtonText("要   牌",30),this.callbtncont.addChild(e),e.x=200,e.y=-140;var t=this.passcard,e=new GameUtil.Menu(this,"","",t);e.setScaleMode(),e.addButtonShap(GameUtil.createRect(0,0,200,40,1,3381758,20,30),-100,-20),e.addButtonText("不   要",30),this.callbtncont.addChild(e),e.x=500,e.y=-140},e.prototype.wantcard=function(){var t=this.parent;t.sendcard(!1)},e.prototype.passcard=function(){var t=this.parent;t.nextplayercall()},e.prototype.showcallbtn=function(t){this.callbtncont.visible=t},e.prototype.updatahandcardnumber=function(){this.handcardnumber=0;for(var t=0;t<this.handcardarr.length;t++){var e=this.handcardarr[t],i=0;i=e.cardnumber>=10?10:e.cardnumber,this.handcardnumber+=i}this.handcardnumber=this.handcardnumber>21?0:this.handcardnumber},e.prototype.getHandcardnumber=function(){return this.handcardnumber},e}(egret.DisplayObjectContainer);__reflect(Player.prototype,"Player");var SharePageShow=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){var t=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.close()},this);var e=new MyBitmap(RES.getRes("sharetip_png"),this.mStageW,0);e.setanchorOff(1,0),this.addChild(e)},e}(Othercontainer);__reflect(SharePageShow.prototype,"SharePageShow");var StartGameScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){BGMPlayer._i().play(SoundName.startgamebgm);var t={code:1};this.show(t)},e.prototype.show=function(t){1==t.code?this.showbg():GameUtil.trace(t.msg)},e.prototype.showbg=function(){var t=new MyBitmap(RES.getRes("startgamebg_jpg"),0,0);t.setanchorOff(0,0),t.width=this.mStageW,t.height=this.mStageH,this.addChild(t);var e=this.mStageW/2,i=(this.mStageH/2,new GameUtil.MyTextField(e,200,100,.5,.5));i.setText(GameConfig.GAMENAME),i.italic=!0,i.textColor=7716842,this.addChild(i),this.addChild(new GameMenus(DisType.LeftTRight))},e.prototype.startgame=function(){GameUtil.trace("startgame"),GameUtil.GameScene.runscene(new GameScene)},e.prototype.gamerank=function(){GameUtil.trace("gamerank"),this.addChild(new GameRankPageShow)},e.prototype.gamehelp=function(){GameUtil.trace("gamehelp"),this.addChild(new GameHelpPageShow)},e.prototype.setting=function(){GameUtil.trace("setting"),this.addChild(new GameSetting)},e.prototype.moregame=function(){},e}(GameUtil.BassPanel);__reflect(StartGameScene.prototype,"StartGameScene");var AdaptGamelayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initlayer=function(t){this.maxheight=t},e.prototype.putItme=function(t){this.addChild(t)},e.prototype.adpat=function(t){void 0===t&&(t=!0);var e=1;this.$getHeight()>this.maxheight&&(e=this.maxheight/this.$getHeight(),t?this.scaleX=this.scaleY=e:this.scaleY=e);var i=(this.mStageW-this.$getWidth()*this.scaleX)/2;this.x=i},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);__reflect(AdaptGamelayer.prototype,"AdaptGamelayer");var Animation=function(t){function e(e,i,n,r,a){var o=t.call(this,RES.getRes(e+"1_png"),r,a)||this;return o.currentNumber=0,o.countNumber=0,o.bLoopCount=0,o.endcallfun=null,o.thisObj=null,o.params=[],o.bremove=!0,o.bpause=!1,o.textureName=e,o.totalNumber=i,o.frameRate=n,o}return __extends(e,t),e.prototype.setLoop=function(t){0==t&&(t=1),this.bLoopCount=t-1},e.prototype.setRemove=function(t){this.bremove=t},e.prototype.play=function(){this.intervaltag=egret.setInterval(this.run,this,this.frameRate)},e.prototype.run=function(){this.nextFrame()},e.prototype.pause=function(){this.bpause=!0},e.prototype.resume=function(){this.bpause=!1},e.prototype.stop=function(){egret.clearInterval(this.intervaltag)},e.prototype.nextFrame=function(){if(!this.bpause){if(this.currentNumber++,this.currentNumber>=this.totalNumber){if(this.currentNumber=1,0==this.bLoopCount)return this.stop(),null!=this.endcallfun&&this.endcallfun.apply(this.thisObj,this.params),void(this.bremove&&this.parent.removeChild(this));this.bLoopCount>0&&this.bLoopCount--}this.setNewTexture(RES.getRes(this.textureName+this.currentNumber+"_png"))}},e.prototype.switchani=function(t,e,i,n,r){void 0===i&&(i=-1),void 0===n&&(n=!0),void 0===r&&(r=this.frameRate),this.stop(),this.textureName=t,this.totalNumber=e,this.currentNumber=0,this.bLoopCount=i,this.bremove=n,this.frameRate=r,this.play()},e.prototype.setendcall=function(t,e,i){this.thisObj=e,this.endcallfun=t,this.params=i},e}(MyBitmap);__reflect(Animation.prototype,"Animation");var GameData=function(){function t(){this.gamesound=[],this.init()}return t.prototype.init=function(){this.GamePause=!1,this.GameOver=!1,this.isLoadingend=!1,this.GameScore=0,this.GameLevel=1,this.HeightScore=0},t._i=function(){return this._inst=null==this._inst?new t:this._inst},t._inst=null,t}();__reflect(GameData.prototype,"GameData");var DateUtils=function(){function t(){}return t.getFormatBySecond=function(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t)}return i},t.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,i=Math.floor(t/3600);e=0==i?"00":10>i?"0"+i:""+i;var n,r,a=Math.floor((t-3600*i)/60),o=Math.floor((t-3600*i)%60);return n=0==a?"00":10>a?"0"+a:""+a,r=0==o?"00":10>o?"0"+o:""+o,e+":"+n+":"+r},t.getFormatBySecond3=function(t){void 0===t&&(t=0);var e,i,n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),a=Math.floor((t-3600*n)%60);
return e=0==r?"00":10>r?"0"+r:""+r,i=0==a?"00":10>a?"0"+a:""+a,e+":"+i},t.getFormatBySecond2=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return i+"-"+n+"-"+r+" "+a+":"+o+":"+s},t.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"},t.getFormatBySecond5=function(t){var e=86400,i=3600,n=60,r=Math.floor(t/e),a=Math.floor(t%e/i),o=Math.floor((t-a*i)/n),s=Math.floor((t-a*i)%n),h="",l="",c="",u="";return t>0?0==r?(h="",0==a?(l="",0==o?(c="",u=0==s?"":10>s?"0"+s+"秒":""+s+"秒"):(c=""+o+"分",u=0==s?"":10>s?"0"+s+"秒":""+s+"秒",c+u)):(l=a+"小时",0==o?(c="",u=0==s?"":10>s?"0"+s+"秒":""+s+"秒"):(c=10>o?"0"+o+"分":""+o+"分",l+c))):(h=r+"天",l=0==a?"":10>a?"0"+a+"小时":""+a+"小时",h+l):""},t}();__reflect(DateUtils.prototype,"DateUtils");var SoundName;!function(t){t[t.gamebgm=0]="gamebgm",t[t.startgamebgm=1]="startgamebgm",t[t.comble=2]="comble",t[t.remove=3]="remove",t[t.newcored=4]="newcored",t[t.clickf=5]="clickf",t[t.end=6]="end"}(SoundName||(SoundName={}));var SceneEffect;!function(t){t[t.NullAction=0]="NullAction",t[t.CrossLeft=1]="CrossLeft",t[t.TransAlpha=2]="TransAlpha",t[t.OpenDoor=3]="OpenDoor"}(SceneEffect||(SceneEffect={}));var GameConfig=function(){function t(){this.initconfigdata()}return t.prototype.initconfigdata=function(){this.bguidedone=!0,this.bfirstplay=!1,GameUtil.readLocalData(t.FIRSTGAME)||(GameUtil.saveLocalData(t.FIRSTGAME,"1"),GameUtil.saveLocalData(t.GAMESOUND,"1"),GameUtil.saveLocalData(t.GAMEMUSIC,"1"),GameUtil.saveLocalData(t.GAMELEVEL,"0"),this.bfirstplay=!0),this.bgamemusic=1==parseInt(GameUtil.readLocalData(t.GAMEMUSIC))?!0:!1,this.bgamesound=1==parseInt(GameUtil.readLocalData(t.GAMESOUND))?!0:!1},t.getSW=function(){return egret.MainContext.instance.stage.stageWidth},t.getSH=function(){return egret.MainContext.instance.stage.stageHeight},t._i=function(){return null==this._instance&&(this._instance=new t),this._instance},t.DEBUG=!0,t.IP="api.h5.gamexun.com",t.GAMENAME="牛牛大作战",t.SERVERNAME="children",t.FIRSTGAME="firstgame",t.GAMESOUND="gamesound",t.GAMEMUSIC="gamemusic",t.GAMELEVEL="gamelevel",t.IsLoadSound=!1,t.SoundName=["startgamebgm.mp3","gamebgm.mp3","comble.mp3","remove.mp3","newcored.mp3","clickf.mp3"],t.MoreGameName=[],t.GUIDESTEPNUM=2,t.DesignWidth=755,t.DesignHeight=1334,t.UATYPE={WeiXinstr:"micromessenger",Androidstr:"android",Iphone:"iPhone"},t.IsBindKeyboard=!1,t.DICBW=74,t.DICBH=81,t.BROW=10,t.BCOL=10,t.OFFY=400,t.TOTALLIFE=3,t._instance=null,t}();__reflect(GameConfig.prototype,"GameConfig");var GetImageByUrl=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=t.call(this)||this;return r.imgUrl=e,r.imgwidth=i,r.imgheight=n,r.init(),r}return __extends(e,t),e.prototype.init=function(){RES.getResByUrl(this.imgUrl,this.comp,this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.comp=function(t){console.log("data====",t),this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},e.prototype.getimg=function(){return this.imag},e}(egret.DisplayObjectContainer);__reflect(GetImageByUrl.prototype,"GetImageByUrl");var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=t.call(this)||this;return r.imgUrl=e,r.imgwidth=i,r.imgheight=n,r.init(),r}return __extends(e,t),e.prototype.init=function(){RES.getResAsync(this.imgUrl,this.comp,this)},e.prototype.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},e}(egret.DisplayObjectContainer);t.GetResByany=e,__reflect(e.prototype,"GameUtil.GetResByany")}(GameUtil||(GameUtil={}));var GuideLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.guidestep=0,GameConfig._i().bguidedone=!1,this.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);t.name="coversp",this.addChild(t),this.creatstepthing(),this.tipframe=new MyBitmap(RES.getRes("guidetipframe_png"),0,0),this.addChild(this.tipframe),this.hand=new MyBitmap(RES.getRes("guidehand_png"),0,0),this.addChild(this.hand),this.tiptext=new GameUtil.MyTextField(0,0,30,0,0),this.tiptext.setText(""),this.tiptext.textColor=31398,this.tiptext.width=346,this.addChild(this.tiptext),this.Guidestep()},e.prototype.creatstepthing=function(){},e.prototype.Guidestep=function(){var t=this.guidestep;switch(t){case 0:this.tipframe.x=this.mStageW/2,this.tipframe.y=this.mStageH-550,GameUtil.relativepos(this.hand,this.tipframe,237,234),GameUtil.relativepos(this.tiptext,this.tipframe,70,36),this.tiptext.text="在摇杆范围内滑动手指可使角色四向移动，点击中间位置可施放炸弹.";break;case 1:this.tiptext.text="点击屏幕任意地方继续游戏。";var e=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkdone()},this)}},e.prototype.checkdone=function(){this.guidestep++,this.guidestep!=GameConfig.GUIDESTEPNUM?this.Guidestep():(GameConfig._i().bguidedone=!0,this.removeChildren(),this.parent.removeChild(this),e.remove())},e.remove=function(){this._inst=null},e._i=function(){return this._inst=null==this._inst?new e:this._inst},e._inst=null,e}(GameUtil.BassPanel);__reflect(GuideLayer.prototype,"GuideLayer");var GameUtil;!function(t){var e=function(){function e(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.init(t,e)}return e.prototype.init=function(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.urlLoader=new egret.URLLoader,this.urlLoader.dataFormat=e,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlRequest=new egret.URLRequest,this.urlRequest.method=t},e.prototype.loaded=function(t){this.urlLoader.removeEventListener(egret.Event.COMPLETE,this.loaded,this),this.thisObj.removeChild(this.coverBg);var e=JSON.parse(this.urlLoader.data);null!=this.onLoader&&this.onLoader.apply(this.thisObj,[e])},e.prototype.send=function(e,i,n,r,a){void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=GameConfig.IP),this.urlRequest.url="Http://"+a+i,this.onLoader=n,this.thisObj=r;var o=new egret.URLVariables(t.objectToString(e));this.urlRequest.data=o,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlLoader.load(this.urlRequest),this.coverBg=t.createRect(0,0,GameConfig.getSW(),GameConfig.getSH(),0),this.thisObj.addChild(this.coverBg),this.coverBg.touchEnabled=!0},e.prototype.setReqMethod=function(t){this.urlRequest.method=t},e.getinstance=function(t,i){return void 0===t&&(t=egret.URLRequestMethod.POST),void 0===i&&(i=egret.URLLoaderDataFormat.TEXT),null==e._instance&&(e._instance=new e(t,i)),e._instance},e}();t.Http=e,__reflect(e.prototype,"GameUtil.Http")}(GameUtil||(GameUtil={}));var CardType;!function(t){t[t.Black=0]="Black",t[t.Red=1]="Red",t[t.Club=2]="Club",t[t.Diamond=3]="Diamond",t[t.King=4]="King",t[t.End=5]="End"}(CardType||(CardType={}));var CardSprite=function(t){function e(e,i){var n=t.call(this)||this;return n.cardnumber=e,n.cardtype=i,n.showback(),n}return __extends(e,t),e.prototype.showback=function(){var t=this.gettypename(this.cardtype)+"-"+this.cardnumber+"_jpg";this.cardfront=new MyBitmap(RES.getRes(t),0,0),this.cardfront.scaleX=0,this.addChild(this.cardfront),this.cardback=new MyBitmap(RES.getRes("cardback_png"),0,0),this.addChild(this.cardback)},e.prototype.showfront=function(){var t=this;egret.Tween.get(this.cardback).to({scaleX:0},250).call(function(){egret.Tween.get(t.cardfront).to({scaleX:1},250)},this)},e.prototype.gettypename=function(t){var e="";switch(t){case CardType.Black:e="B";break;case CardType.Red:e="R";break;case CardType.Club:e="C";break;case CardType.Diamond:e="D";break;case CardType.King:e="K";break;default:e="B"}return e},e}(egret.DisplayObjectContainer);__reflect(CardSprite.prototype,"CardSprite");var GameUtil;!function(t){var e=function(){function t(t,e){this.loadedfun=t,this.thisObj=e,this.loadingRes()}return t.prototype.loadingRes=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preloading")},t.prototype.onResourceLoadComplete=function(t){"preloading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},t.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},t.prototype.onResourceProgress=function(t){"preloading"==t.groupName},t}();t.LoadingLogopre=e,__reflect(e.prototype,"GameUtil.LoadingLogopre")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,r,a,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=!1),void 0===o&&(o=4);var s=e.call(this)||this;return s.loadedfun=t,s.thisObj=i,s.IsGif=a,s.gifTotalcount=o,s.loadingbarOffX=n,s.loadingbarOffY=r,s}return __extends(i,e),i.prototype.init=function(){new t.LoadingLogopre(this.onComplete,this),GameConfig.IsLoadSound&&this.loadsound()},i.prototype.loadsound=function(){for(var t=0;t<GameConfig.SoundName.length;t++){var e=GameConfig.SoundName[t];GameData._i().gamesound[t]=new MySound(e);var i=e.indexOf("bgm")>0?egret.Sound.MUSIC:egret.Sound.EFFECT;GameData._i().gamesound[t].soundtype=i}},i.prototype.onComplete=function(t){if(this.IsGif)this.gifruncount=0,this.loadingbar=new MyBitmap(RES.getRes("loadinggif0_png"),this.mStageW/2+this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.addChild(this.loadingbar),egret.setInterval(this.rungif,this,150);else{this.loadingbar=new MyBitmap(RES.getRes("loadingbar_png"),this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.loadingbar.x=(this.mStageW-this.loadingbar.texture.textureWidth)/2,this.loadingbar.anchorOffsetX=0;var e=this.loadingbar.texture.textureWidth-8,i=this.loadingbar.texture.textureHeight-8,n=new egret.Rectangle(4,4,e,i);this.loadingbar.scale9Grid=n,this.addChild(this.loadingbar),this.loadingbar.width=10}this.loadingRes()},i.prototype.rungif=function(){this.gifruncount++,this.gifruncount>=this.gifTotalcount&&(this.gifruncount=0),this.loadingbar.setNewTexture(RES.getRes("loadinggif"+this.gifruncount+"_png"))},i.prototype.loadingRes=function(){this.loadingView=new LoadingUI,this.loadingView.x=this.mStageW/2,this.loadingView.y=this.mStageH/2+this.loadingbarOffY+30,this.addChild(this.loadingView),this.loadingView.anchorOffsetX=this.loadingView.width/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},i.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},i.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},i.prototype.onResourceProgress=function(t){"preload"==t.groupName&&(this.IsGif||this.setPro(t.itemsLoaded/t.itemsTotal),this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal))},i.prototype.setPro=function(t){this.loadingbar.width=this.loadingbar.texture.textureWidth*t},i.prototype.getPro=function(){return this.loadingbar.width/this.loadingbar.texture.textureWidth},i}(t.BassPanel);t.LoadingPanel=e,__reflect(e.prototype,"GameUtil.LoadingPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var o=e.call(this)||this;return o.menuNormalTexture=null,o.menuSelectTexture=null,o.bScaleMode=!1,o.mScale=.9,o.isActive=!1,o.thisObj=t,o.param=a,o.init(i,n,r),o}return __extends(i,e),i.prototype.init=function(t,e,i){void 0===i&&(i=null),this.btnsound=null,this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.backFun=i,this.btnImg=new MyBitmap(this.menuNormalTexture,0,0),this.addChild(this.btnImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.TouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.TouchCancel,this)},i.prototype.setBackFun=function(t){this.backFun=t},i.prototype.setBtnSound=function(t){this.btnsound=t},i.prototype.setScaleMode=function(t){void 0===t&&(t=.9),this.bScaleMode=!0,this.mScale=t},i.prototype.setButtonTexture=function(t,e){this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.btnImg.setNewTexture(this.menuNormalTexture)},i.prototype.addButtonImg=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.addImg=new MyBitmap(RES.getRes(t),e,i),this.addChild(this.addImg)},i.prototype.setAddImgTexture=function(t){this.addImg.setNewTexture(RES.getRes(t))},i.prototype.addButtonText=function(e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),null!=this.btnImg.texture?this.mTextField=new t.MyTextField(n,r,i):this.mTextField=new t.MyTextField(n,r,i),this.mTextField.setText(e),this.addChild(this.mTextField)},i.prototype.addButtonShap=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.x+=e,t.y+=i,this.addChild(t)},i.prototype.getBtnText=function(){return this.mTextField},i.prototype.setBtnScale=function(t,e){this.btnImg.scaleX=t,this.btnImg.scaleY=e},i.prototype.TouchBegin=function(t){this.btnsound&&this.btnsound.play(),this.btnImg.setNewTexture(this.menuSelectTexture),this.bScaleMode&&(this.scaleX=this.scaleY=this.mScale),this.isActive=!0},i.prototype.TouchMove=function(t){},i.prototype.TouchEnd=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive&&this.backFun.apply(this.thisObj,this.param),this.isActive=!1},i.prototype.TouchCancel=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive=!1},i}(egret.DisplayObjectContainer);t.Menu=e,__reflect(e.prototype,"GameUtil.Menu")}(GameUtil||(GameUtil={}));var GameHelpPageShow=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){this.config={totalpage:0,curpage:0,bg:"",posx:this.mStageW/2,posy:this.mStageH/2};var t=(this.config.totalpage,this.config.curpage,new MyBitmap(RES.getRes(this.config.bg),this.config.posx,this.config.posy));this.addChild(t),t.touchEnabled=!0;var e=new MyBitmap(RES.getRes("helptext_png"),0,0);this.addChild(e),GameUtil.relativepos(e,t,130,67);var i=new GameUtil.MyTextField(44,113,40,0,0);i.textColor=11562317,i.width=508,i.setText("1.点击两个相同水果即可完成一次消除。\n2.让相同的水果连在一起，越多越好。\n3.若最后剩余的水果少于10个，将得到额外加分，剩余越少，加分越多。"),this.addChild(i),i.fontFamily="华文行楷",i.lineSpacing=5,GameUtil.relativepos(i,t,44,113);var n=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(n),GameUtil.relativepos(n,t,579,40)},e.prototype.helpcurcontain=function(t,e,i){t.removeChildren();var n=new GameUtil.MyTextField(0,0,40,0,0);if(n.setText(""),n.setSize(50),n.width=290,t.addChild(n),n.textColor=9462056,GameUtil.relativepos(n,e,280,87),0==i){var r=new MyBitmap(RES.getRes("help_controlimg_png"),0,0);t.addChild(r),GameUtil.relativepos(r,e,135,140),n.text="使用摇杆控制角色移动"}else if(1==i){var r=new MyBitmap(RES.getRes("spear_png"),0,0);t.addChild(r),GameUtil.relativepos(r,e,110,102);var a=new MyBitmap(RES.getRes("bow_png"),0,0);t.addChild(a),GameUtil.relativepos(a,e,110,214),n.setSize(45),n.width=340,n.text="点击枪图标为近身攻击，弓箭为远程攻击。",GameUtil.relativepos(n,e,230,87)}else 2==i&&(n.setSize(40),n.width=460,n.text="小赵是无敌的，只需保护小朋友阿斗不被敌军攻击，直到撑到最后一秒。",GameUtil.relativepos(n,e,110,87))},e}(Othercontainer);__reflect(GameHelpPageShow.prototype,"GameHelpPageShow");var MySound=function(){function t(t){this.isadddone=!1,this.init(t)}return t.prototype.init=function(t){this.sound=new egret.Sound;var e=this;this.sound.addEventListener(egret.Event.COMPLETE,function(t){e.isadddone=!0},this),this.sound.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),this.sound.load("resource/assets/sound/"+t)},t.prototype.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),this.soundtype!=egret.Sound.EFFECT||GameConfig._i().bgamesound){var i=this.sound;this.isadddone&&(this.soundchannel=i.play(t,e))}},t.prototype.stop=function(){this.soundchannel&&this.soundchannel.stop()},t.prototype.setvolume=function(t){this.soundchannel&&(this.soundchannel.volume=t)},t}();__reflect(MySound.prototype,"MySound");var DisType;!function(t){t[t.NULL=0]="NULL",t[t.TopTDown=1]="TopTDown",t[t.DownTTop=2]="DownTTop",t[t.LeftTRight=3]="LeftTRight",t[t.RightTLeft=4]="RightTLeft",t[t.Alpha=5]="Alpha",t[t.End=6]="End"}(DisType||(DisType={}));var GameMenus=function(t){function e(e){return t.call(this,[e])||this}return __extends(e,t),e.prototype.init=function(t){this.showtype=t,this.show()},e.prototype.show=function(){var t=this.mStageW/2,e=this.mStageH/2,i=GameUtil.createRect(t,e+30,400,450,.8,6932632);i.$setAnchorOffsetX(i.width/2),i.$setAnchorOffsetY(i.height/2),this.addChild(i);var n=new MyBitmap(RES.getRes(""),t,e);this.addChild(n);for(var r=[this.startgame,this.howtoplay,this.setting,this.about],a=["开      始","玩      法","设      置","关      于"],o=0;4>o;o++){var s=a[o],h=r[o],l=new GameUtil.Menu(this,"","",h);l.setScaleMode(),l.addButtonShap(GameUtil.createRect(0,0,300,60,1,3381758,40,50),-150,-30),l.addButtonText(s,30),this.addChild(l),l.x=t,l.y=80+e+100*(o-2)}GameUtil.doAction(this,DisType.TopTDown)},e.prototype.startgame=function(){GameUtil.GameScene.runscene(new GameScene)},e.prototype.howtoplay=function(){this.createMask();var t=(this.mStageW/2,this.mStageH/2,new GameUtil.MyTextField(50,50,30,0,.5));t.setText("玩法介绍:"),t.textColor=13363872,t.width=this.mStageW-100,this.maskscene.addChild(t)},e.prototype.setting=function(){this.createMask();var t=(this.mStageW/2,this.mStageH/2,new GameUtil.MyTextField(50,50,30,0,.5));t.setText("游戏设置:"),t.textColor=13363872,t.width=this.mStageW-100,this.maskscene.addChild(t)},e.prototype.about=function(){this.createMask();var t=(this.mStageW/2,this.mStageH/2,new GameUtil.MyTextField(50,50,30,0,.5));t.setText("关于游戏:"),t.textColor=13363872,t.width=this.mStageW-100,this.maskscene.addChild(t)},e.prototype.createMask=function(){var t=this;this.maskscene=new egret.DisplayObjectContainer,this.addChild(this.maskscene),this.maskscene.$setTouchEnabled(!0);var e=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,0);this.maskscene.addChild(e);var i=this.mStageW/2,n=(this.mStageH/2,"返        回"),r=function(){t.removeChild(t.maskscene)},a=new GameUtil.Menu(this,"","",r);a.setScaleMode(),a.addButtonShap(GameUtil.createRect(0,0,300,60,1,3381758,40,50),-150,-30),a.addButtonText(n,30),this.maskscene.addChild(a),a.x=i,a.y=this.mStageH-100},e}(GameUtil.BassPanel);__reflect(GameMenus.prototype,"GameMenus");var GameUtil;!function(t){var e=function(t){function e(e,i,n,r,a,o){void 0===a&&(a=0),void 0===o&&(o=.5);var s=t.call(this)||this;return s.mPercent=100,s.init(e,i,n,r,a,o),s}return __extends(e,t),e.prototype.init=function(t,e,i,n,r,a){this.progressbar=new MyBitmap(RES.getRes(t),e,i),this.addChild(this.progressbar),this.progressbar.scale9Grid=n,this.progressbar.setanchorOff(r,a)},e.prototype.setbarX=function(t){this.progressbar.x=t},e.prototype.setbarY=function(t){this.progressbar.y=t},e.prototype.setPercent=function(t){0>t||(this.mPercent=t,this.updateWidth())},e.prototype.getPercent=function(){return this.mPercent},e.prototype.updateWidth=function(){this.progressbar.width=this.progressbar.texture.textureWidth*this.mPercent},e}(egret.DisplayObjectContainer);t.ProgressBar=e,__reflect(e.prototype,"GameUtil.ProgressBar")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.item=[],n.curseltTag=0,n.itemCount=-1,n.normalTexture=t,n.selectTexture=i,n.init(),n}return __extends(i,e),i.prototype.init=function(){},i.prototype.addItem=function(e,i,n){this.itemCount++;var r=new egret.DisplayObjectContainer,a=new t.Menu(this,this.normalTexture,this.normalTexture,this.chooseButton,[this.itemCount]);a.x=i,a.y=n,r.addChild(a),e.x=i+a.width/2+e.width/2,e.y=n,r.addChild(e),this.item.push(a),this.addChild(r),0==this.itemCount&&a.setButtonTexture(this.selectTexture,this.selectTexture)},i.prototype.chooseButton=function(t){if(t!=this.curseltTag){var e=this.item[t];e.setButtonTexture(this.selectTexture,this.selectTexture);var i=this.item[this.curseltTag];i.setButtonTexture(this.normalTexture,this.normalTexture),this.curseltTag=t}},i.prototype.getCurSelectTag=function(){return this.curseltTag},i}(egret.DisplayObjectContainer);t.RadioButton=e,__reflect(e.prototype,"GameUtil.RadioButton")}(GameUtil||(GameUtil={}));var RandomUtils=function(){function t(){}return t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.floor(this.limit(t,e+1))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t}();__reflect(RandomUtils.prototype,"RandomUtils");var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===n&&(n=.5);var r=t.call(this)||this;return r.scrollview=new egret.ScrollView,r.content=new egret.DisplayObjectContainer,r.addChild(r.scrollview),r.scrollview.width=e,r.scrollview.height=i,r.scrollview.scrollSpeed=n,r.init(),r}return __extends(e,t),e.prototype.init=function(){this.scrollview.setContent(this.content)},e.prototype.putItem=function(t){this.content.addChild(t)},e.prototype.clearItem=function(){this.content.removeChildren()},e.prototype.getScorllTop=function(){return this.scrollview.scrollTop},e.prototype.setScorllTop=function(t){this.scrollview.scrollTop=t},e.prototype.getScorllView=function(){return this.scrollview},e}(egret.DisplayObjectContainer);t.ScrollView=e,__reflect(e.prototype,"GameUtil.ScrollView")}(GameUtil||(GameUtil={}));var Timercontrol=function(){function t(t,e){void 0===e&&(e=0),this.timer=new egret.Timer(t,e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this)}return t.prototype.init=function(t,e,i){console.log("inittime"),this.tagetobj=t,this.fun=e,this.params=i},t.prototype.start=function(){this.timer.start()},t.prototype.pause=function(){this.timer.stop()},t.prototype.stop=function(){this.timer.reset()},t.prototype.timerFunc=function(t){this.tagetobj&&this.fun.apply(this.tagetobj,this.params)},t}();__reflect(Timercontrol.prototype,"Timercontrol");var GameUtil;!function(t){var e=function(e){function i(t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=1200);var a=e.call(this)||this;return a.textsize=30,a.tipText=i,a.tipImg=t,a.bDisappear=n,a.disSecond=r,a.init(),a}return __extends(i,e),i.prototype.init=function(){if(this.showtip(),!this.bDisappear){var e=t.createRect(0,0,GameConfig.getSW(),GameConfig.getSH(),.4);this.addChild(e),this.touchEnabled=!0}if(null==this.tipImg){var i=t.createRect(GameConfig.getSW()/2,GameConfig.getSH()/2,2*this.text.width,1.5*this.text.height,1,9210760);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i)}else this.tipbg=new MyBitmap(RES.getRes(this.tipImg),GameConfig.getSW()/2,GameConfig.getSH()/2),this.addChild(this.tipbg);if(this.bDisappear){var n=egret.Tween.get(this);n.to({alpha:1},300).to({alpha:0},this.disSecond).call(this.close,this)}else this.showbutton();this.addChild(this.text)},i.prototype.showtip=function(){this.text=new t.MyTextField(GameConfig.getSW()/2,GameConfig.getSH()/2,this.textsize),this.text.setText(this.tipText),this.text.textColor=0},i.prototype.setTextwidth=function(t){this.text.width=t},i.prototype.setTextSize=function(t){this.text.setSize(t)},i.prototype.setTextHor=function(t,e,i,n){this.text.textAlign=i,this.text.x=GameConfig.getSW()/2-this.tipbg.width/2+n},i.prototype.setTextlineSpacing=function(t){this.text.lineSpacing=t},i.prototype.showbutton=function(){var e=new t.Menu(this,"acceptBtn_png","acceptBtn_png",this.close);e.x=GameConfig.getSW()/2,e.y=GameConfig.getSH()/2+this.tipbg.texture.textureHeight/2,this.addChild(e),e.setScaleMode()},i.prototype.close=function(){this.parent.removeChild(this)},i}(egret.DisplayObjectContainer);t.TipsPanel=e,__reflect(e.prototype,"GameUtil.TipsPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){function e(t,e,i,n,r,a,o,s){void 0===r&&(r=1),void 0===a&&(a=0),void 0===o&&(o=0);var h=new egret.Shape;return h.x=t,h.y=e,h.graphics.beginFill(a,r),h.graphics.drawRoundRect(0,0,i,n,o,s),h.graphics.endFill(),h}function i(t,e,i,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var a=new egret.Shape;return a.x=t,a.y=e,a.graphics.beginFill(r,n),a.graphics.drawCircle(0,0,i),a.graphics.endFill(),a}function n(t,e,i,n,r,a){var o=new egret.Shape;return o.graphics.lineStyle(t,e),o.graphics.moveTo(i,n),o.graphics.lineTo(r,a),o.graphics.endFill(),o}function r(t){var e="";for(var i in t){var n=i+"="+t[i];e+=n+"&"}return e=e.substr(0,e.length-1)}function a(t){return/^[\u4e00-\u9fa5]+$/.test(t)}function o(t){return t=t.replace(/^/,"")}function s(t){return t=t.toUpperCase(),/^0\d{2,3}-?\d{7,11}$|^1\d{10}$/.test(t)}function h(t,e){egret.localStorage.setItem(t,e)}function l(t){return egret.localStorage.getItem(t)}function c(t){null!=t?egret.localStorage.removeItem(t):egret.localStorage.clear()}function u(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function d(e,i,n,r,a,o){void 0===o&&(o=GameConfig.IP);for(var s,h=window.getIP,l=0;l<h.split("|").length;l++)if(h.split("|")[l].length>6){s=h.split("|")[l];break}var c={openId:i,amount:e,ip:s,nickname:n,gameid:0};t.Http.getinstance().send(c,"/weixinpay/pay",r,a,o)}function p(t){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf(t)?!0:!1}function g(t,e,i,n,r){void 0===r&&(r=!1),r||(t.x=e.x-e.width/2+i,t.y=e.y-e.height/2+n)}function m(t){return GameConfig.getSW()-t}function f(t){return GameConfig.getSH()-t}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]="[DebugLog]"+t[0],console.log.apply(console,t)}function v(t){for(var e=0;e<t.length;e++){var i=t[e];egret.clearInterval(i)}t=[]}function S(t){window.location.href="tel://"+t}function b(t,e){return-1!=e.indexOf(t)?!0:!1}function T(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.getBounds();return n.x=t.x-t.width/2+e,n.y=t.y-t.height/2+i,n}function C(t){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(e);t.filters=[i]}function x(t,e){var i=.8,n=35,r=35,a=2,o=3,s=!1,h=!1,l=new egret.GlowFilter(e,i,n,r,a,o,s,h);t.filters=[l]}function G(t,e,i,n){void 0===i&&(i=1500),void 0===n&&(n=0);do{if(e==DisType.NULL){t.y=0;break}if(e==DisType.TopTDown){t.y=-GameConfig.getSH(),egret.Tween.get(t).to({y:n},i,egret.Ease.bounceOut);break}if(e==DisType.DownTTop){t.y=GameConfig.getSH(),egret.Tween.get(t).to({y:n},i,egret.Ease.bounceOut);break}if(e==DisType.LeftTRight){t.x=-GameConfig.getSW(),egret.Tween.get(t).to({x:n},i,egret.Ease.bounceOut);break}if(e==DisType.RightTLeft){t.x=GameConfig.getSW(),egret.Tween.get(t).to({x:n},i,egret.Ease.bounceOut);break}if(e==DisType.Alpha){t.alpha=0,egret.Tween.get(t).to({alpha:1},i);break}}while(!1)}function _(t,e,i){return egret.setInterval(function(){GameData._i().GamePause||t.apply(e)},e,i)}t.createRect=e,t.createCircle=i,t.createLine=n,t.objectToString=r,t.isChineseName=a,t.removeimag=o,t.isPhoneNum=s,t.saveLocalData=h,t.readLocalData=l,t.clearLocalData=c,t.getQueryString=u,t.getredPack=d,t.isSomeType=p,t.relativepos=g,t.absposx=m,t.absposy=f,t.trace=y,t.clearinterval=v,t.Telnumber=S,t.checkChild=b,t.getrect=T,t.gray=C,t.light=x,t.doAction=G,t.setInterval=_}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.init(),t}return __extends(i,e),i.prototype.init=function(){this.coverBg=t.createRect(0,0,GameConfig.getSW(),GameConfig.getSH(),.3,0),this.addChild(this.coverBg),this.touchEnabled=!0,this.wainttext=new t.MyTextField(GameConfig.getSW()/2,GameConfig.getSH()/2,30,.5,.5),this.wainttext.setText("请等待其他玩家下注"),this.wainttext.textColor=3381758,this.addChild(this.wainttext)},i.prototype.setAlpha=function(t){this.coverBg.alpha=t},i.getInstace=function(){return null==this._instance&&(this._instance=new t.WaitServerPanel),this._instance},i}(egret.DisplayObjectContainer);t.WaitServerPanel=e,__reflect(e.prototype,"GameUtil.WaitServerPanel")}(GameUtil||(GameUtil={}));var qr;!function(t){var e=function(){function e(e){this.mode=t.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var i=0,n=this.data.length;n>i;i++){var r=[],a=this.data.charCodeAt(i);a>65536?(r[0]=240|(1835008&a)>>>18,r[1]=128|(258048&a)>>>12,r[2]=128|(4032&a)>>>6,r[3]=128|63&a):a>2048?(r[0]=224|(61440&a)>>>12,r[1]=128|(4032&a)>>>6,r[2]=128|63&a):a>128?(r[0]=192|(1984&a)>>>6,r[1]=128|63&a):r[0]=a,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return e.prototype.getLength=function(t){return this.parsedData.length},e.prototype.write=function(t){for(var e=0,i=this.parsedData.length;i>e;e++)t.put(this.parsedData[e],8)},e}();t.QR8bitByte=e,__reflect(e.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){this.buffer=[],this.length=0}return t.prototype.get=function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},t.prototype.put=function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},t.prototype.getLengthInBits=function(){return this.length},t.prototype.putBit=function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++},t}();t.QRBitBuffer=e,__reflect(e.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.create=function(i,n,r,a,o,s){void 0===n&&(n=200),void 0===r&&(r=200),void 0===a&&(a=t.QRErrorCorrectLevel.M),void 0===o&&(o=4),void 0===s&&(s=0);var h={color:s,width:n,height:r,correctLevel:a,typeNumer:o},l=new t.QRCodeModel(h.typeNumer,h.correctLevel);return l.addData(i),l.make(),e.draw(l,h)},e.draw=function(t,e){var i=new egret.Sprite,e=e,n=t.getModuleCount(),r=e.width/n,a=e.height/n,o=10;i.graphics.moveTo(-o,-o),i.graphics.beginFill(16777215),i.graphics.drawRect(-o,-o,e.width+2*o,e.height+2*o),i.graphics.endFill();for(var s=0;n>s;s++)for(var h=0;n>h;h++){var l=t.isDark(s,h);l&&(i.graphics.moveTo(h*r,s*a),i.graphics.beginFill(e.color),i.graphics.drawRect(h*r,s*a,r,a),i.graphics.endFill())
}return i},e}();t.QRCode=e,__reflect(e.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return e.prototype.addData=function(e){var i=new t.QR8bitByte(e);this.dataList.push(i),this.dataCache=null},e.prototype.isDark=function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},e.prototype.getModuleCount=function(){return this.moduleCount},e.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},e.prototype.makeImpl=function(t,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,i),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},e.prototype.setupPositionProbePattern=function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i))for(var n=-1;7>=n;n++)-1>=e+n||this.moduleCount<=e+n||(i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n?this.modules[t+i][e+n]=!0:this.modules[t+i][e+n]=!1)},e.prototype.getBestMaskPattern=function(){for(var e=0,i=0,n=0;8>n;n++){this.makeImpl(!0,n);var r=t.QRUtil.getLostPoint(this);(0==n||e>r)&&(e=r,i=n)}return i},e.prototype.createMovieClip=function(t,e,i){var n=t.createEmptyMovieClip(e,i),r=1;this.make();for(var a=0;a<this.modules.length;a++)for(var o=a*r,s=0;s<this.modules[a].length;s++){var h=s*r,l=this.modules[a][s];l&&(n.beginFill(0,100),n.moveTo(h,o),n.lineTo(h+r,o),n.lineTo(h+r,o+r),n.lineTo(h,o+r),n.endFill())}return n},e.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},e.prototype.setupPositionAdjustPattern=function(){for(var e=t.QRUtil.getPatternPosition(this.typeNumber),i=0;i<e.length;i++)for(var n=0;n<e.length;n++){var r=e[i],a=e[n];if(null==this.modules[r][a])for(var o=-2;2>=o;o++)for(var s=-2;2>=s;s++)-2==o||2==o||-2==s||2==s||0==o&&0==s?this.modules[r+o][a+s]=!0:this.modules[r+o][a+s]=!1}},e.prototype.setupTypeNumber=function(e){for(var i=t.QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var r=!e&&1==(i>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;18>n;n++){var r=!e&&1==(i>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},e.prototype.setupTypeInfo=function(e,i){for(var n=this.errorCorrectLevel<<3|i,r=t.QRUtil.getBCHTypeInfo(n),a=0;15>a;a++){var o=!e&&1==(r>>a&1);6>a?this.modules[a][8]=o:8>a?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;15>a;a++){var o=!e&&1==(r>>a&1);8>a?this.modules[8][this.moduleCount-a-1]=o:9>a?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e},e.prototype.mapData=function(e,i){for(var n=-1,r=this.moduleCount-1,a=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var h=0;2>h;h++)if(null==this.modules[r][s-h]){var l=!1;o<e.length&&(l=1==(e[o]>>>a&1));var c=t.QRUtil.getMask(i,r,s-h);c&&(l=!l),this.modules[r][s-h]=l,a--,-1==a&&(o++,a=7)}if(r+=n,0>r||this.moduleCount<=r){r-=n,n=-n;break}}},e.createData=function(i,n,r){for(var a=t.QRRSBlock.getRSBlocks(i,n),o=new t.QRBitBuffer,s=0;s<r.length;s++){var h=r[s];o.put(h.mode,4),o.put(h.getLength(),t.QRUtil.getLengthInBits(h.mode,i)),h.write(o)}for(var l=0,s=0;s<a.length;s++)l+=a[s].dataCount;if(o.getLengthInBits()>8*l)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");for(o.getLengthInBits()+4<=8*l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*l)&&(o.put(e.PAD0,8),!(o.getLengthInBits()>=8*l));)o.put(e.PAD1,8);return e.createBytes(o,a)},e.createBytes=function(e,i){for(var n=0,r=0,a=0,o=new Array(i.length),s=new Array(i.length),h=0;h<i.length;h++){var l=i[h].dataCount,c=i[h].totalCount-l;r=Math.max(r,l),a=Math.max(a,c),o[h]=new Array(l);for(var u=0;u<o[h].length;u++)o[h][u]=255&e.buffer[u+n];n+=l;var d=t.QRUtil.getErrorCorrectPolynomial(c),p=new t.QRPolynomial(o[h],d.getLength()-1),g=p.mod(d);s[h]=new Array(d.getLength()-1);for(var u=0;u<s[h].length;u++){var m=u+g.getLength()-s[h].length;s[h][u]=m>=0?g.get(m):0}}for(var f=0,u=0;u<i.length;u++)f+=i[u].totalCount;for(var y=new Array(f),v=0,u=0;r>u;u++)for(var h=0;h<i.length;h++)u<o[h].length&&(y[v++]=o[h][u]);for(var u=0;a>u;u++)for(var h=0;h<i.length;h++)u<s[h].length&&(y[v++]=s[h][u]);return y},e.PAD0=236,e.PAD1=17,e}();t.QRCodeModel=e,__reflect(e.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.L=1,t.M=0,t.Q=3,t.H=2,t}();t.QRErrorCorrectLevel=e,__reflect(e.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.PATTERN000=0,t.PATTERN001=1,t.PATTERN010=2,t.PATTERN011=3,t.PATTERN100=4,t.PATTERN101=5,t.PATTERN110=6,t.PATTERN111=7,t}();t.QRMaskPattern=e,__reflect(e.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.glog=function(e){return t.isInit||t.init(),1>e&&console.log("错误:n="+e),t.LOG_TABLE[e]},t.gexp=function(e){for(t.isInit||t.init();0>e;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},t.init=function(){t.isInit=!0;for(var e=0;8>e;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;256>e;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;255>e;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e},t.EXP_TABLE=new Array(256),t.LOG_TABLE=new Array(256),t}();t.QRMath=e,__reflect(e.prototype,"qr.QRMath")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.MODE_NUMBER=1,t.MODE_ALPHA_NUM=2,t.MODE_8BIT_BYTE=4,t.MODE_KANJI=8,t}();t.QRMode=e,__reflect(e.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var n=0;n<t.length-i;n++)this.num[n]=t[n+i]}return e.prototype.get=function(t){return this.num[t]},e.prototype.getLength=function(){return this.num.length},e.prototype.multiply=function(i){for(var n=new Array(this.getLength()+i.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<i.getLength();a++)n[r+a]^=t.QRMath.gexp(t.QRMath.glog(this.get(r))+t.QRMath.glog(i.get(a)));return new e(n,0)},e.prototype.mod=function(i){if(this.getLength()-i.getLength()<0)return this;for(var n=t.QRMath.glog(this.get(0))-t.QRMath.glog(i.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<i.getLength();a++)r[a]^=t.QRMath.gexp(t.QRMath.glog(i.get(a))+n);return new e(r,0).mod(i)},e}();t.QRPolynomial=e,__reflect(e.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.totalCount=t,this.dataCount=e}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,i){var n=e.getRsBlockTable(t,i);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var r=n.length/3,a=[],o=0;r>o;o++)for(var s=n[3*o+0],h=n[3*o+1],l=n[3*o+2],c=0;s>c;c++)a.push(new e(h,l));return a},e.getRsBlockTable=function(i,n){switch(n){case t.QRErrorCorrectLevel.L:return e.RS_BLOCK_TABLE[4*(i-1)+0];case t.QRErrorCorrectLevel.M:return e.RS_BLOCK_TABLE[4*(i-1)+1];case t.QRErrorCorrectLevel.Q:return e.RS_BLOCK_TABLE[4*(i-1)+2];case t.QRErrorCorrectLevel.H:return e.RS_BLOCK_TABLE[4*(i-1)+3];default:return}},e}();t.QRRSBlock=e,__reflect(e.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.getBCHTypeInfo=function(t){for(var i=t<<10;e.getBCHDigit(i)-e.getBCHDigit(e.G15)>=0;)i^=e.G15<<e.getBCHDigit(i)-e.getBCHDigit(e.G15);return(t<<10|i)^e.G15_MASK},e.getBCHTypeNumber=function(t){for(var i=t<<12;e.getBCHDigit(i)-e.getBCHDigit(e.G18)>=0;)i^=e.G18<<e.getBCHDigit(i)-e.getBCHDigit(e.G18);return t<<12|i},e.getBCHDigit=function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},e.getPatternPosition=function(t){return e.PATTERN_POSITION_TABLE[t-1]},e.getMask=function(e,i,n){switch(e){case t.QRMaskPattern.PATTERN000:return(i+n)%2==0;case t.QRMaskPattern.PATTERN001:return i%2==0;case t.QRMaskPattern.PATTERN010:return n%3==0;case t.QRMaskPattern.PATTERN011:return(i+n)%3==0;case t.QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case t.QRMaskPattern.PATTERN101:return i*n%2+i*n%3==0;case t.QRMaskPattern.PATTERN110:return(i*n%2+i*n%3)%2==0;case t.QRMaskPattern.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},e.getErrorCorrectPolynomial=function(e){for(var i=new t.QRPolynomial([1],0),n=0;e>n;n++)i=i.multiply(new t.QRPolynomial([1,t.QRMath.gexp(n)],0));return i},e.getLengthInBits=function(e,i){if(i>=1&&10>i)switch(e){case t.QRMode.MODE_NUMBER:return 10;case t.QRMode.MODE_ALPHA_NUM:return 9;case t.QRMode.MODE_8BIT_BYTE:return 8;case t.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>i)switch(e){case t.QRMode.MODE_NUMBER:return 12;case t.QRMode.MODE_ALPHA_NUM:return 11;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>i))throw new Error("type:"+i);switch(e){case t.QRMode.MODE_NUMBER:return 14;case t.QRMode.MODE_ALPHA_NUM:return 13;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},e.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;e>n;n++)for(var r=0;e>r;r++){for(var a=0,o=t.isDark(n,r),s=-1;1>=s;s++)if(!(0>n+s||n+s>=e))for(var h=-1;1>=h;h++)0>r+h||r+h>=e||(0!=s||0!=h)&&o==t.isDark(n+s,r+h)&&a++;a>5&&(i+=3+a-5)}for(var n=0;e-1>n;n++)for(var r=0;e-1>r;r++){var l=0;t.isDark(n,r)&&l++,t.isDark(n+1,r)&&l++,t.isDark(n,r+1)&&l++,t.isDark(n+1,r+1)&&l++,(0==l||4==l)&&(i+=3)}for(var n=0;e>n;n++)for(var r=0;e-6>r;r++)t.isDark(n,r)&&!t.isDark(n,r+1)&&t.isDark(n,r+2)&&t.isDark(n,r+3)&&t.isDark(n,r+4)&&!t.isDark(n,r+5)&&t.isDark(n,r+6)&&(i+=40);for(var r=0;e>r;r++)for(var n=0;e-6>n;n++)t.isDark(n,r)&&!t.isDark(n+1,r)&&t.isDark(n+2,r)&&t.isDark(n+3,r)&&t.isDark(n+4,r)&&!t.isDark(n+5,r)&&t.isDark(n+6,r)&&(i+=40);for(var c=0,r=0;e>r;r++)for(var n=0;e>n;n++)t.isDark(n,r)&&c++;var u=Math.abs(100*c/e/e-50)/5;return i+=10*u},e.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},e._getTypeNumber=function(i,n){for(var r=1,a=e._getUTF8Length(i),o=0,s=e.QRCodeLimitLength.length;s>=o;o++){var h=0;switch(n){case t.QRErrorCorrectLevel.L:h=e.QRCodeLimitLength[o][0];break;case t.QRErrorCorrectLevel.M:h=e.QRCodeLimitLength[o][1];break;case t.QRErrorCorrectLevel.Q:h=e.QRCodeLimitLength[o][2];break;case t.QRErrorCorrectLevel.H:h=e.QRCodeLimitLength[o][3]}if(h>=a)break;r++}if(r>e.QRCodeLimitLength.length)throw new Error("Too long data");return r},e._getUTF8Length=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)},e.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e.G15=1335,e.G18=7973,e.G15_MASK=21522,e.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],e}();t.QRUtil=e,__reflect(e.prototype,"qr.QRUtil")}(qr||(qr={}));